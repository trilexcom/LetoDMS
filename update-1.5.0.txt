-------------------------------------------------------------------
              MyDMS 1.5.0 Update from previous Version
-------------------------------------------------------------------

1. Requirements

You must have version 1.4.4 of MyDMS installed and configured correctly on
your system.

To upgrade from a version of MyDMS older than 1.4.4, first follow the
instructions found in the document "update-1.4.4.txt".


2. Updating the Database

Cut and paste the following statements into your mysql client, making sure
that you are using the correct database. If you have already run
"update_tables-1.5.0.sql" you may skip this step:

CREATE TABLE `tblDocumentLocks` (
	`document` INT NOT NULL ,
	`userID` INT NOT NULL ,
	PRIMARY KEY ( `document` )
) ENGINE = MYISAM ;

ALTER TABLE `tblDocuments` ADD `folderList` TEXT NOT NULL AFTER `folder` ;
ALTER TABLE `tblDocumentContent` ADD INDEX ( `document` ) ;
ALTER TABLE `tblFolders` ADD INDEX ( `parent` ) ;

ALTER TABLE `tblDocumentContent` DROP `id` ;
ALTER TABLE `tblDocumentContent` ADD PRIMARY KEY (`document`, `version`) ;
ALTER TABLE `tblDocumentContent` CHANGE `version` `version` SMALLINT( 5 ) NOT
	NULL AUTO_INCREMENT ;


3. Creating the Folder Index

MyDMS uses a new folder index to aid search through subfolders. This has led
to dramatic improvements in search time. However, in order to be able to take
full advantage of the new search system, it is necessary to populate the
folderList field in the Documents table. To do this, open a web browser
window and log into MyDMS as an Administrative user. Then load the following
page:

http://${server}/${mydms root}/op/op.CreateSubFolderIndex.php

This script will only run if the user has administrative privileges. Even so,
I recommend that the file is deleted after it has been run and you have
verified that the search engine is running correctly. The script need only be
run once, and does not destroy data, but one cannot be too careful. This page
can only be accessed directly -- there are no links within MyDMS that take to
you this page.


4. New Default Theme

The default theme for MyDMS has been replaced with a lightweight variant that
removes the folder tree from the page display. This has been done in order to
optimise the performance of the application on large DMS deployments.

If you prefer to use the original version, it is still available in the
themes folder.

